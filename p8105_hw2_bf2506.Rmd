---
title: "p8105_hw2_bf2506"
output: html_document
date: "2022-09-29"
---
```{r load tidyverse, message=FALSE, warning=FALSE, include=FALSE}
library(tidyverse)
library(magrittr)
```


### Problem 2
```{r read Mrtrash_wheel_data, message=FALSE, warning=FALSE, include=FALSE}
raw_Mrtrash_wheel_data = readxl::read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N533", na = c("", "Decemeber Total", "November Total", "October Total", "September Total", "August Total", "July Total", "June Total", "May Total", "April Total", "March Total", "February Total", "January Total")
)

Mrtrash_wheel_data = drop_na(raw_Mrtrash_wheel_data, Dumpster)
```
```{r rename and integer sportsballs in Mr, message=FALSE, warning=FALSE, include=FALSE}

Mrtrash_wheel_data = janitor::clean_names(Mrtrash_wheel_data) %>% rename(volume_cubicyards = volume_cubic_yards) %>% mutate(sports_balls=as.integer(sports_balls)) 

```

```{r read Professortrash_wheel_data, message=FALSE, warning=FALSE, include=FALSE}
raw_Professortrash_wheel_data = readxl::read_excel("./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "Professor Trash Wheel", range = "A2:N115", na = c("", "Decemeber Total", "November Total", "October Total", "September Total", "August Total", "July Total", "June Total", "May Total", "April Total", "March Total", "February Total", "January Total")
)

Professortrash_wheel_data = drop_na(raw_Professortrash_wheel_data, Dumpster)
```

```{r rename and integer sportsballs in PRO, message=FALSE, warning=FALSE, include=FALSE}

Professortrash_wheel_data = janitor::clean_names(Professortrash_wheel_data) %>% rename(volume_cubicyards = volume_cubic_yards) %>% mutate(sports_balls=as.integer(sports_balls)) 

```

```{r combine tables, message=FALSE, warning=FALSE, include=FALSE}
Mrtrash_wheel_data = 
  mutate(Mrtrash_wheel_data, trash_wheel = "Mr_Trash_Wheel")

Professortrash_wheel_data =
  mutate(Professortrash_wheel_data, trash_wheel = "Professor_Trash_Wheel")

Trash_Wheel_data = 
  bind_rows(Mrtrash_wheel_data, Professortrash_wheel_data) %>% relocate(trash_wheel)

Trash_Wheel_data
```

**Describe the Data form Trash_Wheel_data**
 
The size of the dataset is **`r ncol(Trash_Wheel_data)` variables** and **`r nrow(Trash_Wheel_data)` observations**, and the total weight of trash collected by Professor Trash Wheel is`r sum(Professortrash_wheel_data$weight_tons)` and the total number of sports balls collected by Mr. Trash Wheel in 2020 is `r sum(filter(Mrtrash_wheel_data, year == 2020)$sports_balls)`

**15** variables are as following:  
**·trash_wheel**: whether from "Mr_Trash_Wheel" or "	
Professor_Trash_Wheel"

**·dumpster**: the number of dumpsters 

**·"month"**: the month that collect the data, from Jan to Dec

**·"year" **: the year that collect the data

**·"date" **: the date that collect the data

**·"weight_tons"**: weight in tons

**·"volume_cubicyards"**: volume in cubic yards

**·"plastic_bottles"**:  the number of plastic bottles

**·"polystyrene"**: the number of polystyrene

**·"cigarette_butts"**: the number of cigarette butts 

**·"glass_bottles"**: the number of glass bottles 

**·"grocery_bags"**: the number of grocery bags 

**·"chip_bags"**: the number of chip bags

**·"sports_balls"**：the number of sports balls

**·"homes_powered"**: the number of homes powered by  electricity generated from these trash

### Problem 3

```{r read and clean  pols_month_data, message=FALSE, warning=FALSE, include=FALSE}
pols_month_data=
  read_csv("./data/pols-month.csv") %>% janitor::clean_names() %>% separate(mon, into = c("year", "month", "day"), sep = "\\-") %>% mutate( year = as.integer(year), month = as.integer(month), day = as.integer(day)) %>% mutate( month = replace(month, month == c(1,2,3,4,5,6,7,8,9,10,11,12), c("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"))) %>% mutate(president = ifelse(prez_gop - prez_dem > 0, "gop", "dem")) %>% select(-c(prez_gop, prez_dem, day))
```

```{r read and clean  snp_data, message=FALSE, warning=FALSE, include=FALSE}

snp_data_1 =
  read_csv("./data/snp.csv", n_max = 175) %>% janitor::clean_names() %>% separate(date, into = c("year", "month", "day"), sep = "\\/") %>% select(-day) %>% mutate( year = recode(year, `1` = "2001", `2` = "2002", `3` = "2003", `4` = "2004", `5` = "2005", `6` = "2006", `7` = "2007", `8` = "2008", `9` = "2009", `10` = "2010", `11` = "2011", `12` = "2012")) %>% mutate( year = as.integer(year), month = as.integer(month))

snp_data_2 =
  read_csv("./data/snp.csv", skip = 176, col_names = FALSE) %>% separate(X1, into = c("month", "day", "year"), sep = "\\/") %>% select(-day) %>% rename(close = X2) %>% relocate(year) %>% mutate( year = as.integer(year), month = as.integer(month)) %>% mutate(year = ifelse(year == 0, as.integer(year + 2000), as.integer(year + 1900)))

snp_data = 
  bind_rows(snp_data_1, snp_data_2) %>% janitor::clean_names() %>% arrange(year, month)

```
